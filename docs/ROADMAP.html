<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mini-SBR Tower - Complete Development Roadmap</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .content {
            padding: 40px;
        }

        .step {
            margin-bottom: 40px;
            border-left: 4px solid #667eea;
            padding-left: 30px;
            position: relative;
        }

        .step::before {
            content: attr(data-step);
            position: absolute;
            left: -15px;
            top: 0;
            width: 30px;
            height: 30px;
            background: #667eea;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9em;
        }

        .step h2 {
            color: #667eea;
            font-size: 1.8em;
            margin-bottom: 15px;
            margin-top: 5px;
        }

        .step h3 {
            color: #764ba2;
            font-size: 1.3em;
            margin: 20px 0 10px 0;
        }

        .step p {
            margin-bottom: 15px;
            color: #555;
        }

        pre {
            background: #f4f4f4;
            border: 1px solid #ddd;
            border-left: 4px solid #667eea;
            padding: 15px;
            overflow-x: auto;
            border-radius: 5px;
            margin: 15px 0;
            font-size: 0.9em;
        }

        code {
            font-family: 'Courier New', monospace;
            color: #e83e8c;
            background: #f8f9fa;
            padding: 2px 6px;
            border-radius: 3px;
        }

        .note {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }

        .note strong {
            color: #856404;
        }

        .tip {
            background: #d1ecf1;
            border-left: 4px solid #17a2b8;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }

        .tip strong {
            color: #0c5460;
        }

        .warning {
            background: #f8d7da;
            border-left: 4px solid #dc3545;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }

        .warning strong {
            color: #721c24;
        }

        .checklist {
            background: #d4edda;
            border-left: 4px solid #28a745;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }

        .checklist ul {
            margin-left: 20px;
            margin-top: 10px;
        }

        .checklist li {
            margin: 8px 0;
        }

        .file-path {
            background: #e9ecef;
            padding: 8px 12px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 0.95em;
            display: inline-block;
            margin: 10px 0;
            color: #495057;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        table th {
            background: #667eea;
            color: white;
            padding: 12px;
            text-align: left;
        }

        table td {
            padding: 10px;
            border-bottom: 1px solid #ddd;
        }

        table tr:hover {
            background: #f8f9fa;
        }

        .progress-tracker {
            position: sticky;
            top: 20px;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        .progress-tracker h3 {
            color: #667eea;
            margin-bottom: 15px;
        }

        .progress-bar {
            width: 100%;
            height: 30px;
            background: #e9ecef;
            border-radius: 15px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            width: 0%;
            transition: width 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        footer {
            background: #2c3e50;
            color: white;
            text-align: center;
            padding: 20px;
        }

        @media print {
            body {
                background: white;
            }
            .progress-tracker {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Mini-SBR Tower</h1>
            <p>Complete Hands-On Development Roadmap</p>
            <p style="font-size: 0.9em; margin-top: 10px;">AI-Powered Recruitment Platform - Django REST API</p>
        </header>

        <div class="content">
            <div class="progress-tracker">
                <h3>Your Progress</h3>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill">0%</div>
                </div>
                <p style="margin-top: 10px; color: #666;">Complete each step and check them off to track your progress!</p>
            </div>

            <!-- STEP 1: ENVIRONMENT SETUP -->
            <div class="step" data-step="1">
                <h2>Environment Setup & Project Initialization</h2>

                <p>Before writing any code, we need to set up our development environment with Python, Django, and all necessary dependencies.</p>

                <h3>1.1 Check Python Installation</h3>
                <p>Open your terminal and verify Python 3.8+ is installed:</p>
                <pre>python3 --version
# Should show Python 3.8 or higher</pre>

                <h3>1.2 Create Project Directory</h3>
                <pre>cd /Users/majedbiazid/Documents/Development/Personal/mini-sbr-tower
mkdir mini_sbr
cd mini_sbr</pre>

                <h3>1.3 Create Virtual Environment</h3>
                <p>This isolates your project dependencies from system Python:</p>
                <pre>python3 -m venv venv
source venv/bin/activate  # On Mac/Linux
# venv\Scripts\activate   # On Windows</pre>

                <div class="tip">
                    <strong>Tip:</strong> You should see <code>(venv)</code> in your terminal prompt when the virtual environment is active.
                </div>

                <h3>1.4 Create requirements.txt</h3>
                <p>Create a file called <code>requirements.txt</code> with these dependencies:</p>
                <div class="file-path">mini_sbr/requirements.txt</div>
                <pre>Django==5.0.1
djangorestframework==3.14.0
djangorestframework-simplejwt==5.3.1
django-cors-headers==4.3.1
Pillow==10.2.0
python-decouple==3.8</pre>

                <h3>1.5 Install Dependencies</h3>
                <pre>pip install -r requirements.txt</pre>

                <div class="note">
                    <strong>Note:</strong> This will take a few minutes. Django REST Framework provides tools for building APIs, SimpleJWT handles authentication, and CORS headers allow frontend apps to connect.
                </div>

                <h3>1.6 Create Django Project</h3>
                <pre>django-admin startproject mini_sbr .
# The dot at the end creates the project in the current directory</pre>

                <h3>1.7 Create Apps</h3>
                <p>Django organizes code into "apps". Create a folder for all our apps:</p>
                <pre>mkdir apps
cd apps
python ../manage.py startapp users
python ../manage.py startapp companies
python ../manage.py startapp jobs
python ../manage.py startapp candidates
python ../manage.py startapp applications
python ../manage.py startapp dashboard
cd ..</pre>

                <div class="checklist">
                    <strong>Checkpoint - Your directory structure should look like:</strong>
                    <ul>
                        <li>mini_sbr/
                            <ul>
                                <li>venv/</li>
                                <li>mini_sbr/ (settings, urls, etc.)</li>
                                <li>apps/ (users, companies, jobs, etc.)</li>
                                <li>manage.py</li>
                                <li>requirements.txt</li>
                            </ul>
                        </li>
                    </ul>
                </div>

                <h3>1.8 Create Media Directory</h3>
                <p>This will store uploaded CV files:</p>
                <pre>mkdir media
mkdir media/cvs
mkdir media/logos</pre>
            </div>

            <!-- STEP 2: SETTINGS CONFIGURATION -->
            <div class="step" data-step="2">
                <h2>Configure Django Settings</h2>

                <p>Now we'll configure Django to use our apps, enable REST framework, and set up authentication.</p>

                <h3>2.1 Update settings.py</h3>
                <div class="file-path">mini_sbr/mini_sbr/settings.py</div>
                <p>Open this file and make the following changes:</p>

                <h4>Add to INSTALLED_APPS (around line 33):</h4>
                <pre>INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',

    # Third party apps
    'rest_framework',
    'rest_framework_simplejwt',
    'corsheaders',

    # Our apps
    'apps.users',
    'apps.companies',
    'apps.jobs',
    'apps.candidates',
    'apps.applications',
    'apps.dashboard',
]</pre>

                <h4>Add CORS middleware (around line 46):</h4>
                <pre>MIDDLEWARE = [
    'django.middleware.security.SecurityMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'corsheaders.middleware.CorsMiddleware',  # ADD THIS LINE
    'django.middleware.common.CommonMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.middleware.clickjacking.XFrameOptionsMiddleware',
]</pre>

                <h4>Set custom User model (around line 80):</h4>
                <pre>AUTH_USER_MODEL = 'users.User'</pre>

                <h4>Add at the bottom of the file:</h4>
                <pre># REST Framework Configuration
REST_FRAMEWORK = {
    'DEFAULT_AUTHENTICATION_CLASSES': (
        'rest_framework_simplejwt.authentication.JWTAuthentication',
    ),
    'DEFAULT_PERMISSION_CLASSES': (
        'rest_framework.permissions.IsAuthenticated',
    ),
    'DEFAULT_PAGINATION_CLASS': 'rest_framework.pagination.PageNumberPagination',
    'PAGE_SIZE': 20,
}

# JWT Configuration
from datetime import timedelta

SIMPLE_JWT = {
    'ACCESS_TOKEN_LIFETIME': timedelta(hours=24),
    'REFRESH_TOKEN_LIFETIME': timedelta(days=7),
    'ROTATE_REFRESH_TOKENS': True,
    'BLACKLIST_AFTER_ROTATION': True,
}

# CORS Configuration (for development)
CORS_ALLOWED_ORIGINS = [
    "http://localhost:3000",  # Next.js
    "http://localhost:8080",  # Flutter web
]

CORS_ALLOW_CREDENTIALS = True

# Media Files
MEDIA_URL = '/media/'
MEDIA_ROOT = BASE_DIR / 'media'

# Static Files
STATIC_URL = 'static/'
STATIC_ROOT = BASE_DIR / 'staticfiles'</pre>

                <div class="warning">
                    <strong>Important:</strong> Make sure to add the <code>from datetime import timedelta</code> import at the top of settings.py with other imports!
                </div>
            </div>

            <!-- STEP 3: USER MODEL -->
            <div class="step" data-step="3">
                <h2>Create Custom User Model</h2>

                <p>We'll create a custom user model that supports multiple roles (Admin, Company, Candidate).</p>

                <h3>3.1 Create User Model</h3>
                <div class="file-path">mini_sbr/apps/users/models.py</div>
                <pre>from django.contrib.auth.models import AbstractBaseUser, BaseUserManager, PermissionsMixin
from django.db import models

class UserManager(BaseUserManager):
    """Custom user manager for email-based authentication"""

    def create_user(self, email, password=None, **extra_fields):
        if not email:
            raise ValueError('Users must have an email address')

        email = self.normalize_email(email)
        user = self.model(email=email, **extra_fields)
        user.set_password(password)
        user.save(using=self._db)
        return user

    def create_superuser(self, email, password=None, **extra_fields):
        extra_fields.setdefault('is_staff', True)
        extra_fields.setdefault('is_superuser', True)
        extra_fields.setdefault('role', 'ADMIN')

        return self.create_user(email, password, **extra_fields)


class User(AbstractBaseUser, PermissionsMixin):
    """Custom User model with role-based access"""

    ROLE_CHOICES = [
        ('ADMIN', 'Administrator'),
        ('COMPANY', 'Company'),
        ('CANDIDATE', 'Candidate'),
    ]

    email = models.EmailField(unique=True, max_length=255)
    role = models.CharField(max_length=20, choices=ROLE_CHOICES)
    is_active = models.BooleanField(default=True)
    is_staff = models.BooleanField(default=False)
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)

    objects = UserManager()

    USERNAME_FIELD = 'email'
    REQUIRED_FIELDS = ['role']

    class Meta:
        db_table = 'users'
        verbose_name = 'User'
        verbose_name_plural = 'Users'

    def __str__(self):
        return f"{self.email} ({self.role})"

    @property
    def is_admin(self):
        return self.role == 'ADMIN'

    @property
    def is_company(self):
        return self.role == 'COMPANY'

    @property
    def is_candidate(self):
        return self.role == 'CANDIDATE'</pre>

                <div class="note">
                    <strong>Understanding the code:</strong>
                    <ul>
                        <li><code>AbstractBaseUser</code> - Provides core authentication functionality</li>
                        <li><code>UserManager</code> - Handles user creation logic</li>
                        <li><code>USERNAME_FIELD = 'email'</code> - Users login with email instead of username</li>
                        <li><code>ROLE_CHOICES</code> - Defines the three user types in our system</li>
                    </ul>
                </div>

                <h3>3.2 Create Admin Configuration</h3>
                <div class="file-path">mini_sbr/apps/users/admin.py</div>
                <pre>from django.contrib import admin
from django.contrib.auth.admin import UserAdmin as BaseUserAdmin
from .models import User

@admin.register(User)
class UserAdmin(BaseUserAdmin):
    list_display = ['email', 'role', 'is_active', 'created_at']
    list_filter = ['role', 'is_active']
    search_fields = ['email']
    ordering = ['-created_at']

    fieldsets = (
        (None, {'fields': ('email', 'password')}),
        ('Personal info', {'fields': ('role',)}),
        ('Permissions', {'fields': ('is_active', 'is_staff', 'is_superuser')}),
    )

    add_fieldsets = (
        (None, {
            'classes': ('wide',),
            'fields': ('email', 'role', 'password1', 'password2'),
        }),
    )</pre>
            </div>

            <!-- STEP 4: COMPANY & CANDIDATE MODELS -->
            <div class="step" data-step="4">
                <h2>Create Company and Candidate Models</h2>

                <h3>4.1 Company Model</h3>
                <div class="file-path">mini_sbr/apps/companies/models.py</div>
                <pre>from django.db import models
from django.conf import settings

class Company(models.Model):
    """Company profile linked to a user account"""

    INDUSTRY_CHOICES = [
        ('TECH', 'Technology'),
        ('CONSTRUCTION', 'Construction'),
        ('HEALTHCARE', 'Healthcare'),
        ('FINANCE', 'Finance'),
        ('EDUCATION', 'Education'),
        ('RETAIL', 'Retail'),
        ('OTHER', 'Other'),
    ]

    user = models.OneToOneField(
        settings.AUTH_USER_MODEL,
        on_delete=models.CASCADE,
        related_name='company_profile'
    )
    name = models.CharField(max_length=200)
    logo = models.ImageField(upload_to='logos/', null=True, blank=True)
    industry = models.CharField(max_length=50, choices=INDUSTRY_CHOICES)
    description = models.TextField(blank=True)
    website = models.URLField(blank=True)
    location = models.CharField(max_length=200)
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)

    class Meta:
        db_table = 'companies'
        verbose_name_plural = 'Companies'

    def __str__(self):
        return self.name</pre>

                <h3>4.2 Company Admin</h3>
                <div class="file-path">mini_sbr/apps/companies/admin.py</div>
                <pre>from django.contrib import admin
from .models import Company

@admin.register(Company)
class CompanyAdmin(admin.ModelAdmin):
    list_display = ['name', 'industry', 'location', 'created_at']
    list_filter = ['industry']
    search_fields = ['name', 'location']</pre>

                <h3>4.3 Candidate Model</h3>
                <div class="file-path">mini_sbr/apps/candidates/models.py</div>
                <pre>from django.db import models
from django.conf import settings

class Candidate(models.Model):
    """Candidate profile with CV and skills"""

    user = models.OneToOneField(
        settings.AUTH_USER_MODEL,
        on_delete=models.CASCADE,
        related_name='candidate_profile'
    )
    full_name = models.CharField(max_length=200)
    phone = models.CharField(max_length=20)
    cv_file = models.FileField(upload_to='cvs/', null=True, blank=True)
    skills = models.JSONField(default=list, blank=True)
    experience_years = models.IntegerField(default=0)
    location = models.CharField(max_length=200)
    bio = models.TextField(blank=True)
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)

    class Meta:
        db_table = 'candidates'

    def __str__(self):
        return self.full_name</pre>

                <h3>4.4 Candidate Admin</h3>
                <div class="file-path">mini_sbr/apps/candidates/admin.py</div>
                <pre>from django.contrib import admin
from .models import Candidate

@admin.register(Candidate)
class CandidateAdmin(admin.ModelAdmin):
    list_display = ['full_name', 'phone', 'location', 'experience_years', 'created_at']
    search_fields = ['full_name', 'phone']
    list_filter = ['experience_years']</pre>

                <div class="tip">
                    <strong>Understanding JSONField:</strong> The <code>skills</code> field uses JSONField to store an array like <code>["Python", "Django", "REST APIs"]</code>. This is flexible and doesn't require a separate Skills table.
                </div>
            </div>

            <!-- STEP 5: JOB & APPLICATION MODELS -->
            <div class="step" data-step="5">
                <h2>Create Job and Application Models</h2>

                <h3>5.1 Job Model</h3>
                <div class="file-path">mini_sbr/apps/jobs/models.py</div>
                <pre>from django.db import models

class Job(models.Model):
    """Job posting created by companies"""

    EMPLOYMENT_TYPES = [
        ('FULL_TIME', 'Full Time'),
        ('PART_TIME', 'Part Time'),
        ('CONTRACT', 'Contract'),
        ('INTERNSHIP', 'Internship'),
    ]

    company = models.ForeignKey(
        'companies.Company',
        on_delete=models.CASCADE,
        related_name='jobs'
    )
    title = models.CharField(max_length=200)
    description = models.TextField()
    requirements = models.TextField()
    required_skills = models.JSONField(default=list)
    employment_type = models.CharField(max_length=20, choices=EMPLOYMENT_TYPES)
    location = models.CharField(max_length=200)
    salary_min = models.DecimalField(max_digits=10, decimal_places=2, null=True, blank=True)
    salary_max = models.DecimalField(max_digits=10, decimal_places=2, null=True, blank=True)
    is_active = models.BooleanField(default=True)
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)

    class Meta:
        db_table = 'jobs'
        ordering = ['-created_at']

    def __str__(self):
        return f"{self.title} at {self.company.name}"</pre>

                <h3>5.2 Job Admin</h3>
                <div class="file-path">mini_sbr/apps/jobs/admin.py</div>
                <pre>from django.contrib import admin
from .models import Job

@admin.register(Job)
class JobAdmin(admin.ModelAdmin):
    list_display = ['title', 'company', 'location', 'employment_type', 'is_active', 'created_at']
    list_filter = ['employment_type', 'is_active']
    search_fields = ['title', 'company__name', 'location']</pre>

                <h3>5.3 Application Model</h3>
                <div class="file-path">mini_sbr/apps/applications/models.py</div>
                <pre>from django.db import models

class Application(models.Model):
    """Job application submitted by candidates"""

    STATUS_CHOICES = [
        ('PENDING', 'Pending Review'),
        ('REVIEWED', 'Reviewed'),
        ('SHORTLISTED', 'Shortlisted'),
        ('HIRED', 'Hired'),
        ('REJECTED', 'Rejected'),
    ]

    job = models.ForeignKey(
        'jobs.Job',
        on_delete=models.CASCADE,
        related_name='applications'
    )
    candidate = models.ForeignKey(
        'candidates.Candidate',
        on_delete=models.CASCADE,
        related_name='applications'
    )
    status = models.CharField(max_length=20, choices=STATUS_CHOICES, default='PENDING')
    cover_letter = models.TextField(blank=True)
    ai_score = models.IntegerField(null=True, blank=True)
    ai_analysis = models.JSONField(null=True, blank=True)
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)

    class Meta:
        db_table = 'applications'
        ordering = ['-created_at']
        unique_together = ['job', 'candidate']

    def __str__(self):
        return f"{self.candidate.full_name} -> {self.job.title}"</pre>

                <h3>5.4 Application Admin</h3>
                <div class="file-path">mini_sbr/apps/applications/admin.py</div>
                <pre>from django.contrib import admin
from .models import Application

@admin.register(Application)
class ApplicationAdmin(admin.ModelAdmin):
    list_display = ['candidate', 'job', 'status', 'ai_score', 'created_at']
    list_filter = ['status']
    search_fields = ['candidate__full_name', 'job__title']</pre>

                <div class="checklist">
                    <strong>All Models Complete!</strong> You now have:
                    <ul>
                        <li>User (with email auth + roles)</li>
                        <li>Company (with industry & location)</li>
                        <li>Candidate (with CV & skills)</li>
                        <li>Job (with requirements & salary)</li>
                        <li>Application (with AI analysis)</li>
                    </ul>
                </div>
            </div>

            <!-- STEP 6: MIGRATIONS -->
            <div class="step" data-step="6">
                <h2>Create and Run Database Migrations</h2>

                <p>Migrations convert your Python models into database tables.</p>

                <h3>6.1 Create Migrations</h3>
                <pre>python manage.py makemigrations</pre>

                <div class="note">
                    <strong>Expected output:</strong> You should see Django creating migration files for users, companies, candidates, jobs, and applications.
                </div>

                <h3>6.2 Apply Migrations</h3>
                <pre>python manage.py migrate</pre>

                <div class="tip">
                    <strong>What just happened?</strong> Django created SQLite database tables for all your models with proper relationships, indexes, and constraints.
                </div>

                <h3>6.3 Create Superuser</h3>
                <p>This admin account lets you access Django admin panel:</p>
                <pre>python manage.py createsuperuser
# Email: admin@example.com
# Role: ADMIN
# Password: (choose a strong password)</pre>

                <h3>6.4 Test the Server</h3>
                <pre>python manage.py runserver</pre>

                <p>Open your browser to <code>http://localhost:8000/admin</code> and login with your superuser credentials!</p>

                <div class="warning">
                    <strong>Troubleshooting:</strong> If you get errors about missing migrations, make sure all apps are in INSTALLED_APPS in settings.py.
                </div>
            </div>

            <!-- STEP 7: SERIALIZERS -->
            <div class="step" data-step="7">
                <h2>Create API Serializers</h2>

                <p>Serializers convert Python objects to JSON and validate incoming data.</p>

                <h3>7.1 User Serializers</h3>
                <div class="file-path">mini_sbr/apps/users/serializers.py</div>
                <pre>from rest_framework import serializers
from .models import User

class UserSerializer(serializers.ModelSerializer):
    class Meta:
        model = User
        fields = ['id', 'email', 'role', 'is_active', 'created_at']
        read_only_fields = ['id', 'created_at']


class RegisterSerializer(serializers.ModelSerializer):
    password = serializers.CharField(write_only=True, min_length=8)

    class Meta:
        model = User
        fields = ['email', 'password', 'role']

    def create(self, validated_data):
        user = User.objects.create_user(
            email=validated_data['email'],
            password=validated_data['password'],
            role=validated_data['role']
        )
        return user


class LoginSerializer(serializers.Serializer):
    email = serializers.EmailField()
    password = serializers.CharField(write_only=True)</pre>

                <h3>7.2 Company Serializers</h3>
                <div class="file-path">mini_sbr/apps/companies/serializers.py</div>
                <pre>from rest_framework import serializers
from .models import Company

class CompanySerializer(serializers.ModelSerializer):
    user_email = serializers.EmailField(source='user.email', read_only=True)

    class Meta:
        model = Company
        fields = [
            'id', 'user', 'user_email', 'name', 'logo',
            'industry', 'description', 'website', 'location',
            'created_at', 'updated_at'
        ]
        read_only_fields = ['id', 'user', 'created_at', 'updated_at']</pre>

                <h3>7.3 Candidate Serializers</h3>
                <div class="file-path">mini_sbr/apps/candidates/serializers.py</div>
                <pre>from rest_framework import serializers
from .models import Candidate

class CandidateSerializer(serializers.ModelSerializer):
    user_email = serializers.EmailField(source='user.email', read_only=True)

    class Meta:
        model = Candidate
        fields = [
            'id', 'user', 'user_email', 'full_name', 'phone',
            'cv_file', 'skills', 'experience_years', 'location',
            'bio', 'created_at', 'updated_at'
        ]
        read_only_fields = ['id', 'user', 'created_at', 'updated_at']</pre>

                <h3>7.4 Job Serializers</h3>
                <div class="file-path">mini_sbr/apps/jobs/serializers.py</div>
                <pre>from rest_framework import serializers
from .models import Job

class JobSerializer(serializers.ModelSerializer):
    company_name = serializers.CharField(source='company.name', read_only=True)
    applications_count = serializers.SerializerMethodField()

    class Meta:
        model = Job
        fields = [
            'id', 'company', 'company_name', 'title', 'description',
            'requirements', 'required_skills', 'employment_type',
            'location', 'salary_min', 'salary_max', 'is_active',
            'applications_count', 'created_at', 'updated_at'
        ]
        read_only_fields = ['id', 'created_at', 'updated_at']

    def get_applications_count(self, obj):
        return obj.applications.count()</pre>

                <h3>7.5 Application Serializers</h3>
                <div class="file-path">mini_sbr/apps/applications/serializers.py</div>
                <pre>from rest_framework import serializers
from .models import Application

class ApplicationSerializer(serializers.ModelSerializer):
    candidate_name = serializers.CharField(source='candidate.full_name', read_only=True)
    job_title = serializers.CharField(source='job.title', read_only=True)
    company_name = serializers.CharField(source='job.company.name', read_only=True)

    class Meta:
        model = Application
        fields = [
            'id', 'job', 'job_title', 'company_name',
            'candidate', 'candidate_name', 'status',
            'cover_letter', 'ai_score', 'ai_analysis',
            'created_at', 'updated_at'
        ]
        read_only_fields = ['id', 'ai_score', 'ai_analysis', 'created_at', 'updated_at']</pre>

                <div class="note">
                    <strong>Serializer Methods:</strong>
                    <ul>
                        <li><code>source='company.name'</code> - Follow relationship to get related field</li>
                        <li><code>SerializerMethodField()</code> - Call custom method to compute value</li>
                        <li><code>write_only=True</code> - Field only accepted in requests, not returned</li>
                        <li><code>read_only=True</code> - Field only returned, can't be modified</li>
                    </ul>
                </div>
            </div>

            <!-- STEP 8: AUTHENTICATION VIEWS -->
            <div class="step" data-step="8">
                <h2>Create Authentication Views</h2>

                <h3>8.1 Auth Views</h3>
                <div class="file-path">mini_sbr/apps/users/views.py</div>
                <pre>from rest_framework import generics, status
from rest_framework.decorators import api_view, permission_classes
from rest_framework.permissions import AllowAny, IsAuthenticated
from rest_framework.response import Response
from rest_framework_simplejwt.tokens import RefreshToken
from django.contrib.auth import authenticate
from .models import User
from .serializers import UserSerializer, RegisterSerializer, LoginSerializer
from apps.companies.models import Company
from apps.candidates.models import Candidate

class RegisterView(generics.CreateAPIView):
    """Register a new user with email, password, and role"""
    serializer_class = RegisterSerializer
    permission_classes = [AllowAny]

    def create(self, request, *args, **kwargs):
        serializer = self.get_serializer(data=request.data)
        serializer.is_valid(raise_exception=True)
        user = serializer.save()

        # Create profile based on role
        if user.role == 'COMPANY':
            Company.objects.create(
                user=user,
                name=request.data.get('company_name', 'Unnamed Company'),
                industry=request.data.get('industry', 'OTHER'),
                location=request.data.get('location', '')
            )
        elif user.role == 'CANDIDATE':
            Candidate.objects.create(
                user=user,
                full_name=request.data.get('full_name', ''),
                phone=request.data.get('phone', ''),
                location=request.data.get('location', '')
            )

        # Generate tokens
        refresh = RefreshToken.for_user(user)

        return Response({
            'user': UserSerializer(user).data,
            'tokens': {
                'refresh': str(refresh),
                'access': str(refresh.access_token),
            }
        }, status=status.HTTP_201_CREATED)


@api_view(['POST'])
@permission_classes([AllowAny])
def login_view(request):
    """Login with email and password"""
    serializer = LoginSerializer(data=request.data)
    serializer.is_valid(raise_exception=True)

    user = authenticate(
        email=serializer.validated_data['email'],
        password=serializer.validated_data['password']
    )

    if user is None:
        return Response(
            {'error': 'Invalid credentials'},
            status=status.HTTP_401_UNAUTHORIZED
        )

    refresh = RefreshToken.for_user(user)

    return Response({
        'user': UserSerializer(user).data,
        'tokens': {
            'refresh': str(refresh),
            'access': str(refresh.access_token),
        }
    })


@api_view(['GET'])
@permission_classes([IsAuthenticated])
def me_view(request):
    """Get current authenticated user"""
    return Response(UserSerializer(request.user).data)</pre>

                <div class="tip">
                    <strong>JWT Flow:</strong>
                    <ol>
                        <li>User registers/logs in â†’ receives access + refresh tokens</li>
                        <li>Client stores tokens (localStorage/secure storage)</li>
                        <li>Client sends access token in header: <code>Authorization: Bearer &lt;token&gt;</code></li>
                        <li>When access token expires, use refresh token to get new one</li>
                    </ol>
                </div>
            </div>

            <!-- STEP 9: BUSINESS LOGIC VIEWS -->
            <div class="step" data-step="9">
                <h2>Create Business Logic Views</h2>

                <h3>9.1 Company Views</h3>
                <div class="file-path">mini_sbr/apps/companies/views.py</div>
                <pre>from rest_framework import viewsets, status
from rest_framework.decorators import action
from rest_framework.response import Response
from rest_framework.permissions import IsAuthenticated
from .models import Company
from .serializers import CompanySerializer
from apps.applications.models import Application

class CompanyViewSet(viewsets.ModelViewSet):
    queryset = Company.objects.all()
    serializer_class = CompanySerializer
    permission_classes = [IsAuthenticated]

    def get_queryset(self):
        if self.request.user.is_admin:
            return Company.objects.all()
        elif self.request.user.is_company:
            return Company.objects.filter(user=self.request.user)
        return Company.objects.none()

    @action(detail=True, methods=['get'])
    def stats(self, request, pk=None):
        """Get company dashboard statistics"""
        company = self.get_object()

        total_jobs = company.jobs.count()
        active_jobs = company.jobs.filter(is_active=True).count()
        total_applications = Application.objects.filter(job__company=company).count()
        pending_applications = Application.objects.filter(
            job__company=company,
            status='PENDING'
        ).count()

        return Response({
            'total_jobs': total_jobs,
            'active_jobs': active_jobs,
            'total_applications': total_applications,
            'pending_applications': pending_applications,
        })</pre>

                <h3>9.2 Job Views</h3>
                <div class="file-path">mini_sbr/apps/jobs/views.py</div>
                <pre>from rest_framework import viewsets, status
from rest_framework.decorators import action
from rest_framework.response import Response
from rest_framework.permissions import IsAuthenticated, AllowAny
from .models import Job
from .serializers import JobSerializer
from apps.applications.serializers import ApplicationSerializer

class JobViewSet(viewsets.ModelViewSet):
    queryset = Job.objects.filter(is_active=True)
    serializer_class = JobSerializer

    def get_permissions(self):
        # Allow anyone to view jobs, but only companies can create/edit
        if self.action in ['list', 'retrieve']:
            return [AllowAny()]
        return [IsAuthenticated()]

    def get_queryset(self):
        queryset = Job.objects.all()

        # Filter by company if user is a company
        if self.request.user.is_authenticated and self.request.user.is_company:
            queryset = queryset.filter(company__user=self.request.user)

        # Public filters
        location = self.request.query_params.get('location')
        if location:
            queryset = queryset.filter(location__icontains=location)

        skills = self.request.query_params.get('skills')
        if skills:
            skill_list = skills.split(',')
            queryset = queryset.filter(required_skills__overlap=skill_list)

        return queryset

    def perform_create(self, serializer):
        # Automatically set company from authenticated user
        company = self.request.user.company_profile
        serializer.save(company=company)

    @action(detail=True, methods=['get'])
    def applications(self, request, pk=None):
        """Get all applications for this job"""
        job = self.get_object()
        applications = job.applications.all()
        serializer = ApplicationSerializer(applications, many=True)
        return Response(serializer.data)</pre>

                <h3>9.3 Candidate Views</h3>
                <div class="file-path">mini_sbr/apps/candidates/views.py</div>
                <pre>from rest_framework import viewsets, status
from rest_framework.decorators import action
from rest_framework.response import Response
from rest_framework.permissions import IsAuthenticated
from rest_framework.parsers import MultiPartParser, FormParser
from .models import Candidate
from .serializers import CandidateSerializer

class CandidateViewSet(viewsets.ModelViewSet):
    queryset = Candidate.objects.all()
    serializer_class = CandidateSerializer
    permission_classes = [IsAuthenticated]

    def get_queryset(self):
        if self.request.user.is_admin:
            return Candidate.objects.all()
        elif self.request.user.is_candidate:
            return Candidate.objects.filter(user=self.request.user)
        return Candidate.objects.none()

    @action(detail=True, methods=['post'], parser_classes=[MultiPartParser, FormParser])
    def upload_cv(self, request, pk=None):
        """Upload or update CV file"""
        candidate = self.get_object()

        if 'cv_file' not in request.FILES:
            return Response(
                {'error': 'No file provided'},
                status=status.HTTP_400_BAD_REQUEST
            )

        candidate.cv_file = request.FILES['cv_file']
        candidate.save()

        serializer = self.get_serializer(candidate)
        return Response(serializer.data)</pre>

                <h3>9.4 Application Views</h3>
                <div class="file-path">mini_sbr/apps/applications/views.py</div>
                <pre>from rest_framework import viewsets, status
from rest_framework.decorators import action
from rest_framework.response import Response
from rest_framework.permissions import IsAuthenticated
from .models import Application
from .serializers import ApplicationSerializer
import random

class ApplicationViewSet(viewsets.ModelViewSet):
    queryset = Application.objects.all()
    serializer_class = ApplicationSerializer
    permission_classes = [IsAuthenticated]

    def get_queryset(self):
        user = self.request.user

        if user.is_admin:
            return Application.objects.all()
        elif user.is_company:
            return Application.objects.filter(job__company__user=user)
        elif user.is_candidate:
            return Application.objects.filter(candidate__user=user)

        return Application.objects.none()

    def perform_create(self, serializer):
        # Automatically set candidate from authenticated user
        candidate = self.request.user.candidate_profile
        serializer.save(candidate=candidate)

    @action(detail=True, methods=['patch'])
    def update_status(self, request, pk=None):
        """Update application status (company only)"""
        application = self.get_object()

        if not request.user.is_company:
            return Response(
                {'error': 'Only companies can update status'},
                status=status.HTTP_403_FORBIDDEN
            )

        new_status = request.data.get('status')
        if new_status not in dict(Application.STATUS_CHOICES):
            return Response(
                {'error': 'Invalid status'},
                status=status.HTTP_400_BAD_REQUEST
            )

        application.status = new_status
        application.save()

        serializer = self.get_serializer(application)
        return Response(serializer.data)

    @action(detail=True, methods=['post'])
    def analyze(self, request, pk=None):
        """Run dummy AI analysis on application"""
        application = self.get_object()

        # Generate dummy AI scores
        skill_match = random.randint(60, 95)
        experience_match = random.randint(50, 90)
        education_match = random.randint(65, 95)

        ai_score = int((skill_match + experience_match + education_match) / 3)

        ai_analysis = {
            'skill_match': skill_match,
            'experience_match': experience_match,
            'education_match': education_match,
            'strengths': random.sample([
                'Python', 'Django', 'REST APIs', 'Team leadership',
                'Problem solving', 'Communication', 'Agile', 'SQL'
            ], 3),
            'gaps': random.sample([
                'Cloud experience', 'DevOps', 'Frontend', 'Docker',
                'Kubernetes', 'GraphQL', 'Mobile development'
            ], 2),
            'recommendation': 'Good fit for the position' if ai_score > 70 else 'Needs review',
            'confidence': round(random.uniform(0.7, 0.95), 2)
        }

        application.ai_score = ai_score
        application.ai_analysis = ai_analysis
        application.save()

        serializer = self.get_serializer(application)
        return Response(serializer.data)</pre>

                <div class="note">
                    <strong>ViewSet Actions:</strong>
                    <ul>
                        <li><code>list()</code> - GET /api/resource/</li>
                        <li><code>retrieve()</code> - GET /api/resource/1/</li>
                        <li><code>create()</code> - POST /api/resource/</li>
                        <li><code>update()</code> - PUT /api/resource/1/</li>
                        <li><code>partial_update()</code> - PATCH /api/resource/1/</li>
                        <li><code>destroy()</code> - DELETE /api/resource/1/</li>
                        <li><code>@action</code> - Custom endpoint like /api/resource/1/analyze/</li>
                    </ul>
                </div>
            </div>

            <!-- STEP 10: DASHBOARD VIEWS -->
            <div class="step" data-step="10">
                <h2>Create Dashboard Views</h2>

                <div class="file-path">mini_sbr/apps/dashboard/views.py</div>
                <pre>from rest_framework.decorators import api_view, permission_classes
from rest_framework.permissions import IsAuthenticated
from rest_framework.response import Response
from django.db.models import Count, Avg
from apps.companies.models import Company
from apps.jobs.models import Job
from apps.candidates.models import Candidate
from apps.applications.models import Application

@api_view(['GET'])
@permission_classes([IsAuthenticated])
def company_dashboard(request):
    """Dashboard stats for companies"""
    if not request.user.is_company:
        return Response({'error': 'Not authorized'}, status=403)

    company = request.user.company_profile

    total_jobs = company.jobs.count()
    active_jobs = company.jobs.filter(is_active=True).count()

    applications = Application.objects.filter(job__company=company)
    total_applications = applications.count()

    applications_by_status = applications.values('status').annotate(
        count=Count('id')
    )

    avg_ai_score = applications.filter(
        ai_score__isnull=False
    ).aggregate(avg=Avg('ai_score'))['avg']

    recent_applications = applications.select_related(
        'candidate', 'job'
    ).order_by('-created_at')[:10]

    from apps.applications.serializers import ApplicationSerializer

    return Response({
        'total_jobs': total_jobs,
        'active_jobs': active_jobs,
        'total_applications': total_applications,
        'applications_by_status': list(applications_by_status),
        'average_ai_score': round(avg_ai_score, 1) if avg_ai_score else None,
        'recent_applications': ApplicationSerializer(recent_applications, many=True).data,
    })


@api_view(['GET'])
@permission_classes([IsAuthenticated])
def admin_dashboard(request):
    """Platform-wide stats for admins"""
    if not request.user.is_admin:
        return Response({'error': 'Not authorized'}, status=403)

    total_companies = Company.objects.count()
    total_candidates = Candidate.objects.count()
    total_jobs = Job.objects.count()
    active_jobs = Job.objects.filter(is_active=True).count()
    total_applications = Application.objects.count()

    applications_by_status = Application.objects.values('status').annotate(
        count=Count('id')
    )

    jobs_by_industry = Company.objects.values('industry').annotate(
        count=Count('jobs')
    )

    return Response({
        'total_companies': total_companies,
        'total_candidates': total_candidates,
        'total_jobs': total_jobs,
        'active_jobs': active_jobs,
        'total_applications': total_applications,
        'applications_by_status': list(applications_by_status),
        'jobs_by_industry': list(jobs_by_industry),
    })</pre>
            </div>

            <!-- STEP 11: URL ROUTING -->
            <div class="step" data-step="11">
                <h2>Configure URL Routing</h2>

                <h3>11.1 App URLs - Users</h3>
                <div class="file-path">mini_sbr/apps/users/urls.py</div>
                <pre>from django.urls import path
from rest_framework_simplejwt.views import TokenRefreshView
from . import views

urlpatterns = [
    path('register/', views.RegisterView.as_view(), name='register'),
    path('login/', views.login_view, name='login'),
    path('refresh/', TokenRefreshView.as_view(), name='token_refresh'),
    path('me/', views.me_view, name='me'),
]</pre>

                <h3>11.2 Main Project URLs</h3>
                <div class="file-path">mini_sbr/mini_sbr/urls.py</div>
                <pre>from django.contrib import admin
from django.urls import path, include
from django.conf import settings
from django.conf.urls.static import static
from rest_framework.routers import DefaultRouter
from apps.companies.views import CompanyViewSet
from apps.jobs.views import JobViewSet
from apps.candidates.views import CandidateViewSet
from apps.applications.views import ApplicationViewSet
from apps.dashboard import views as dashboard_views

# Create router for ViewSets
router = DefaultRouter()
router.register('companies', CompanyViewSet)
router.register('jobs', JobViewSet)
router.register('candidates', CandidateViewSet)
router.register('applications', ApplicationViewSet)

urlpatterns = [
    path('admin/', admin.site.urls),
    path('api/auth/', include('apps.users.urls')),
    path('api/', include(router.urls)),
    path('api/dashboard/company/', dashboard_views.company_dashboard),
    path('api/dashboard/admin/', dashboard_views.admin_dashboard),
]

# Serve media files in development
if settings.DEBUG:
    urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)</pre>

                <div class="tip">
                    <strong>Router Magic:</strong> The DefaultRouter automatically creates all CRUD endpoints for ViewSets:
                    <ul>
                        <li>GET /api/jobs/ - List all jobs</li>
                        <li>POST /api/jobs/ - Create job</li>
                        <li>GET /api/jobs/1/ - Get job details</li>
                        <li>PUT /api/jobs/1/ - Update job</li>
                        <li>DELETE /api/jobs/1/ - Delete job</li>
                        <li>POST /api/applications/1/analyze/ - Custom action</li>
                    </ul>
                </div>
            </div>

            <!-- STEP 12: TESTING -->
            <div class="step" data-step="12">
                <h2>Testing Your API</h2>

                <h3>12.1 Start the Server</h3>
                <pre>python manage.py runserver</pre>

                <h3>12.2 Test with cURL</h3>

                <h4>Register a Company:</h4>
                <pre>curl -X POST http://localhost:8000/api/auth/register/ \
  -H "Content-Type: application/json" \
  -d '{
    "email": "techcorp@example.com",
    "password": "SecurePass123",
    "role": "COMPANY",
    "company_name": "TechCorp Arabia",
    "industry": "TECH",
    "location": "Riyadh"
  }'</pre>

                <h4>Register a Candidate:</h4>
                <pre>curl -X POST http://localhost:8000/api/auth/register/ \
  -H "Content-Type: application/json" \
  -d '{
    "email": "john@example.com",
    "password": "SecurePass123",
    "role": "CANDIDATE",
    "full_name": "John Doe",
    "phone": "+966501234567",
    "location": "Jeddah"
  }'</pre>

                <h4>Login:</h4>
                <pre>curl -X POST http://localhost:8000/api/auth/login/ \
  -H "Content-Type: application/json" \
  -d '{
    "email": "techcorp@example.com",
    "password": "SecurePass123"
  }'</pre>

                <div class="note">
                    <strong>Save the access token from the response!</strong> You'll need it for authenticated requests.
                </div>

                <h4>Create a Job (as Company):</h4>
                <pre>curl -X POST http://localhost:8000/api/jobs/ \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN" \
  -d '{
    "title": "Senior Python Developer",
    "description": "Looking for experienced Python developer",
    "requirements": "5+ years experience, Django expertise",
    "required_skills": ["Python", "Django", "REST APIs", "PostgreSQL"],
    "employment_type": "FULL_TIME",
    "location": "Riyadh",
    "salary_min": 15000,
    "salary_max": 25000
  }'</pre>

                <h4>List All Jobs:</h4>
                <pre>curl http://localhost:8000/api/jobs/</pre>

                <h4>Apply to Job (as Candidate):</h4>
                <pre>curl -X POST http://localhost:8000/api/applications/ \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_CANDIDATE_TOKEN" \
  -d '{
    "job": 1,
    "cover_letter": "I am excited to apply for this position..."
  }'</pre>

                <h4>Analyze Application (AI):</h4>
                <pre>curl -X POST http://localhost:8000/api/applications/1/analyze/ \
  -H "Authorization: Bearer YOUR_COMPANY_TOKEN"</pre>

                <h4>Get Company Dashboard:</h4>
                <pre>curl http://localhost:8000/api/dashboard/company/ \
  -H "Authorization: Bearer YOUR_COMPANY_TOKEN"</pre>

                <h3>12.3 Test with Postman/Insomnia</h3>
                <div class="checklist">
                    <strong>Recommended Flow:</strong>
                    <ul>
                        <li>Create company user via /api/auth/register/</li>
                        <li>Login and save access token</li>
                        <li>Create 3-4 jobs via /api/jobs/</li>
                        <li>Create candidate user via /api/auth/register/</li>
                        <li>Login as candidate, save token</li>
                        <li>Apply to jobs via /api/applications/</li>
                        <li>Login as company again</li>
                        <li>View applications via /api/jobs/1/applications/</li>
                        <li>Analyze applications via /api/applications/1/analyze/</li>
                        <li>Update status via /api/applications/1/update_status/</li>
                    </ul>
                </div>
            </div>

            <!-- STEP 13: SEED DATA SCRIPT -->
            <div class="step" data-step="13">
                <h2>Create Sample Data Script</h2>

                <p>Let's create a management command to populate the database with sample data.</p>

                <h3>13.1 Create Management Command Directory</h3>
                <pre>mkdir -p apps/users/management/commands
touch apps/users/management/__init__.py
touch apps/users/management/commands/__init__.py</pre>

                <h3>13.2 Create Seed Command</h3>
                <div class="file-path">mini_sbr/apps/users/management/commands/seed_data.py</div>
                <pre>from django.core.management.base import BaseCommand
from apps.users.models import User
from apps.companies.models import Company
from apps.candidates.models import Candidate
from apps.jobs.models import Job
from apps.applications.models import Application

class Command(BaseCommand):
    help = 'Seed database with sample data'

    def handle(self, *args, **kwargs):
        self.stdout.write('Clearing existing data...')
        Application.objects.all().delete()
        Job.objects.all().delete()
        Candidate.objects.all().delete()
        Company.objects.all().delete()
        User.objects.filter(is_superuser=False).delete()

        self.stdout.write('Creating companies...')

        # Company 1: TechCorp
        tech_user = User.objects.create_user(
            email='techcorp@example.com',
            password='password123',
            role='COMPANY'
        )
        techcorp = Company.objects.create(
            user=tech_user,
            name='TechCorp Arabia',
            industry='TECH',
            location='Riyadh',
            description='Leading technology company in Saudi Arabia'
        )

        # Company 2: BuildIt
        build_user = User.objects.create_user(
            email='buildit@example.com',
            password='password123',
            role='COMPANY'
        )
        buildit = Company.objects.create(
            user=build_user,
            name='BuildIt Construction',
            industry='CONSTRUCTION',
            location='Jeddah',
            description='Major construction company'
        )

        # Company 3: HealthFirst
        health_user = User.objects.create_user(
            email='healthfirst@example.com',
            password='password123',
            role='COMPANY'
        )
        healthfirst = Company.objects.create(
            user=health_user,
            name='HealthFirst',
            industry='HEALTHCARE',
            location='Dammam',
            description='Healthcare services provider'
        )

        self.stdout.write('Creating candidates...')

        # Candidate 1
        cand1_user = User.objects.create_user(
            email='ahmed@example.com',
            password='password123',
            role='CANDIDATE'
        )
        cand1 = Candidate.objects.create(
            user=cand1_user,
            full_name='Ahmed Al-Khalid',
            phone='+966501234567',
            skills=['Python', 'Django', 'REST APIs', 'PostgreSQL'],
            experience_years=5,
            location='Riyadh',
            bio='Experienced software engineer'
        )

        # Candidate 2
        cand2_user = User.objects.create_user(
            email='fatima@example.com',
            password='password123',
            role='CANDIDATE'
        )
        cand2 = Candidate.objects.create(
            user=cand2_user,
            full_name='Fatima Al-Rashid',
            phone='+966507654321',
            skills=['Project Management', 'Agile', 'Communication', 'Leadership'],
            experience_years=7,
            location='Jeddah',
            bio='Certified project manager'
        )

        # Candidate 3
        cand3_user = User.objects.create_user(
            email='omar@example.com',
            password='password123',
            role='CANDIDATE'
        )
        cand3 = Candidate.objects.create(
            user=cand3_user,
            full_name='Omar Hassan',
            phone='+966509876543',
            skills=['SQL', 'Python', 'Tableau', 'Excel', 'Data Analysis'],
            experience_years=3,
            location='Dammam',
            bio='Data analyst with business intelligence experience'
        )

        self.stdout.write('Creating jobs...')

        # Jobs for TechCorp
        job1 = Job.objects.create(
            company=techcorp,
            title='Senior Python Developer',
            description='Looking for experienced Python developer to join our backend team',
            requirements='5+ years Python, Django experience required',
            required_skills=['Python', 'Django', 'REST APIs', 'PostgreSQL'],
            employment_type='FULL_TIME',
            location='Riyadh',
            salary_min=15000,
            salary_max=25000
        )

        job2 = Job.objects.create(
            company=techcorp,
            title='Frontend Developer',
            description='React specialist for modern web applications',
            requirements='3+ years React, TypeScript',
            required_skills=['React', 'TypeScript', 'CSS', 'JavaScript'],
            employment_type='FULL_TIME',
            location='Riyadh',
            salary_min=12000,
            salary_max=18000
        )

        # Jobs for BuildIt
        job3 = Job.objects.create(
            company=buildit,
            title='Project Manager',
            description='Manage construction projects from start to finish',
            requirements='5+ years project management, PMP certified preferred',
            required_skills=['Project Management', 'Agile', 'Communication', 'Leadership'],
            employment_type='FULL_TIME',
            location='Jeddah',
            salary_min=18000,
            salary_max=28000
        )

        # Jobs for HealthFirst
        job4 = Job.objects.create(
            company=healthfirst,
            title='Data Analyst',
            description='Analyze healthcare data and generate insights',
            requirements='2+ years experience, SQL and Python required',
            required_skills=['SQL', 'Python', 'Tableau', 'Excel'],
            employment_type='FULL_TIME',
            location='Dammam',
            salary_min=10000,
            salary_max=15000
        )

        self.stdout.write('Creating applications...')

        # Applications
        app1 = Application.objects.create(
            job=job1,
            candidate=cand1,
            status='PENDING',
            cover_letter='I am very interested in this position...'
        )

        app2 = Application.objects.create(
            job=job3,
            candidate=cand2,
            status='REVIEWED',
            cover_letter='With my project management experience...',
            ai_score=85
        )

        app3 = Application.objects.create(
            job=job4,
            candidate=cand3,
            status='SHORTLISTED',
            cover_letter='I am excited to apply my data analysis skills...',
            ai_score=92
        )

        self.stdout.write(self.style.SUCCESS('Successfully seeded database!'))
        self.stdout.write(f'Created {Company.objects.count()} companies')
        self.stdout.write(f'Created {Candidate.objects.count()} candidates')
        self.stdout.write(f'Created {Job.objects.count()} jobs')
        self.stdout.write(f'Created {Application.objects.count()} applications')</pre>

                <h3>13.3 Run the Seed Command</h3>
                <pre>python manage.py seed_data</pre>

                <div class="tip">
                    <strong>Now test again!</strong> You now have sample data to work with. Try logging in as different users:
                    <ul>
                        <li>techcorp@example.com / password123</li>
                        <li>ahmed@example.com / password123</li>
                    </ul>
                </div>
            </div>

            <!-- STEP 14: PERMISSIONS -->
            <div class="step" data-step="14">
                <h2>Add Custom Permissions</h2>

                <p>Create reusable permission classes for better security.</p>

                <h3>14.1 Create Permissions File</h3>
                <div class="file-path">mini_sbr/apps/users/permissions.py</div>
                <pre>from rest_framework import permissions

class IsAdmin(permissions.BasePermission):
    """Only admins can access"""

    def has_permission(self, request, view):
        return request.user.is_authenticated and request.user.is_admin


class IsCompany(permissions.BasePermission):
    """Only companies can access"""

    def has_permission(self, request, view):
        return request.user.is_authenticated and request.user.is_company


class IsCandidate(permissions.BasePermission):
    """Only candidates can access"""

    def has_permission(self, request, view):
        return request.user.is_authenticated and request.user.is_candidate


class IsOwnerOrAdmin(permissions.BasePermission):
    """Object owner or admin can access"""

    def has_object_permission(self, request, view, obj):
        if request.user.is_admin:
            return True

        # Check if object has 'user' attribute
        if hasattr(obj, 'user'):
            return obj.user == request.user

        return False</pre>

                <h3>14.2 Apply Permissions</h3>
                <p>Update your views to use these permissions. For example, in <code>companies/views.py</code>:</p>
                <pre>from apps.users.permissions import IsOwnerOrAdmin

class CompanyViewSet(viewsets.ModelViewSet):
    queryset = Company.objects.all()
    serializer_class = CompanySerializer
    permission_classes = [IsAuthenticated, IsOwnerOrAdmin]
    # ... rest of the code</pre>
            </div>

            <!-- STEP 15: ERROR HANDLING -->
            <div class="step" data-step="15">
                <h2>Add Error Handling & Validation</h2>

                <h3>15.1 Custom Exception Handler</h3>
                <div class="file-path">mini_sbr/mini_sbr/exceptions.py</div>
                <pre>from rest_framework.views import exception_handler
from rest_framework.response import Response

def custom_exception_handler(exc, context):
    """Custom exception handler for consistent error responses"""

    response = exception_handler(exc, context)

    if response is not None:
        custom_response = {
            'error': True,
            'message': str(exc),
            'details': response.data
        }
        response.data = custom_response

    return response</pre>

                <h3>15.2 Update Settings</h3>
                <p>Add to <code>REST_FRAMEWORK</code> in settings.py:</p>
                <pre>'EXCEPTION_HANDLER': 'mini_sbr.exceptions.custom_exception_handler',</pre>

                <h3>15.3 Add Validation to Serializers</h3>
                <p>Example for Job serializer:</p>
                <pre>class JobSerializer(serializers.ModelSerializer):
    # ... existing code ...

    def validate(self, data):
        """Validate job data"""
        if data.get('salary_min') and data.get('salary_max'):
            if data['salary_min'] > data['salary_max']:
                raise serializers.ValidationError(
                    "Minimum salary cannot be greater than maximum salary"
                )

        if len(data.get('required_skills', [])) < 1:
            raise serializers.ValidationError(
                "At least one skill is required"
            )

        return data</pre>
            </div>

            <!-- STEP 16: TESTING & DOCUMENTATION -->
            <div class="step" data-step="16">
                <h2>Final Testing & Documentation</h2>

                <h3>16.1 Create API Documentation</h3>
                <p>Install and configure DRF Spectacular for automatic API docs:</p>
                <pre>pip install drf-spectacular</pre>

                <p>Add to INSTALLED_APPS in settings.py:</p>
                <pre>'drf_spectacular',</pre>

                <p>Add to REST_FRAMEWORK in settings.py:</p>
                <pre>'DEFAULT_SCHEMA_CLASS': 'drf_spectacular.openapi.AutoSchema',</pre>

                <p>Add to urls.py:</p>
                <pre>from drf_spectacular.views import SpectacularAPIView, SpectacularSwaggerView

urlpatterns = [
    # ... existing patterns ...
    path('api/schema/', SpectacularAPIView.as_view(), name='schema'),
    path('api/docs/', SpectacularSwaggerView.as_view(url_name='schema'), name='swagger-ui'),
]</pre>

                <p>Now visit <code>http://localhost:8000/api/docs/</code> for interactive API documentation!</p>

                <h3>16.2 Complete Testing Checklist</h3>
                <div class="checklist">
                    <strong>Test these scenarios:</strong>
                    <ul>
                        <li>Register company, candidate, and verify profile creation</li>
                        <li>Login with correct and incorrect credentials</li>
                        <li>Create jobs as company user</li>
                        <li>List jobs without authentication (public)</li>
                        <li>Apply to job as candidate</li>
                        <li>Try to apply twice to same job (should fail)</li>
                        <li>Upload CV file for candidate</li>
                        <li>View applications as company</li>
                        <li>Run AI analysis on application</li>
                        <li>Update application status</li>
                        <li>View company dashboard stats</li>
                        <li>Test permissions (candidate can't create jobs, etc.)</li>
                        <li>Test token refresh endpoint</li>
                    </ul>
                </div>

                <h3>16.3 Project Structure Summary</h3>
                <pre>mini_sbr/
â”œâ”€â”€ manage.py
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ mini_sbr/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ settings.py         # Configuration
â”‚   â”œâ”€â”€ urls.py              # Main URL routing
â”‚   â”œâ”€â”€ exceptions.py        # Error handling
â”‚   â””â”€â”€ wsgi.py
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ users/
â”‚   â”‚   â”œâ”€â”€ models.py        # User model
â”‚   â”‚   â”œâ”€â”€ serializers.py   # User serializers
â”‚   â”‚   â”œâ”€â”€ views.py         # Auth views
â”‚   â”‚   â”œâ”€â”€ permissions.py   # Custom permissions
â”‚   â”‚   â””â”€â”€ management/commands/seed_data.py
â”‚   â”œâ”€â”€ companies/
â”‚   â”‚   â”œâ”€â”€ models.py        # Company model
â”‚   â”‚   â”œâ”€â”€ serializers.py   # Company serializers
â”‚   â”‚   â””â”€â”€ views.py         # Company viewset
â”‚   â”œâ”€â”€ candidates/
â”‚   â”‚   â”œâ”€â”€ models.py        # Candidate model
â”‚   â”‚   â”œâ”€â”€ serializers.py   # Candidate serializers
â”‚   â”‚   â””â”€â”€ views.py         # Candidate viewset
â”‚   â”œâ”€â”€ jobs/
â”‚   â”‚   â”œâ”€â”€ models.py        # Job model
â”‚   â”‚   â”œâ”€â”€ serializers.py   # Job serializers
â”‚   â”‚   â””â”€â”€ views.py         # Job viewset
â”‚   â”œâ”€â”€ applications/
â”‚   â”‚   â”œâ”€â”€ models.py        # Application model
â”‚   â”‚   â”œâ”€â”€ serializers.py   # Application serializers
â”‚   â”‚   â””â”€â”€ views.py         # Application viewset + AI
â”‚   â””â”€â”€ dashboard/
â”‚       â””â”€â”€ views.py         # Dashboard stats
â””â”€â”€ media/
    â”œâ”€â”€ cvs/                 # Uploaded CVs
    â””â”€â”€ logos/               # Company logos</pre>
            </div>

            <!-- FINAL STEP -->
            <div class="step" data-step="17">
                <h2>Congratulations! You've Built a Complete API!</h2>

                <h3>What You've Learned</h3>
                <div class="note">
                    <strong>Core Concepts:</strong>
                    <ul>
                        <li>Django project structure and apps</li>
                        <li>Custom User model with role-based access</li>
                        <li>Database models with relationships (OneToOne, ForeignKey)</li>
                        <li>Django REST Framework serializers</li>
                        <li>ViewSets and custom actions</li>
                        <li>JWT authentication</li>
                        <li>Permissions and authorization</li>
                        <li>File uploads (CV, logo)</li>
                        <li>Query filtering and aggregation</li>
                        <li>Management commands</li>
                    </ul>
                </div>

                <h3>Next Steps</h3>
                <div class="tip">
                    <strong>Enhancements to try:</strong>
                    <ul>
                        <li>Add email verification on registration</li>
                        <li>Implement password reset flow</li>
                        <li>Add real AI integration (OpenAI, Anthropic Claude)</li>
                        <li>Parse CV files to extract skills automatically</li>
                        <li>Add job recommendations for candidates</li>
                        <li>Implement notifications system</li>
                        <li>Add search with Elasticsearch</li>
                        <li>Deploy to production (AWS, Heroku, DigitalOcean)</li>
                        <li>Build Flutter mobile app frontend</li>
                        <li>Build Next.js web app frontend</li>
                    </ul>
                </div>

                <h3>Resources</h3>
                <table>
                    <tr>
                        <th>Resource</th>
                        <th>Description</th>
                    </tr>
                    <tr>
                        <td><a href="https://docs.djangoproject.com/">Django Docs</a></td>
                        <td>Official Django documentation</td>
                    </tr>
                    <tr>
                        <td><a href="https://www.django-rest-framework.org/">DRF Docs</a></td>
                        <td>Django REST Framework guide</td>
                    </tr>
                    <tr>
                        <td><a href="https://django-rest-framework-simplejwt.readthedocs.io/">SimpleJWT</a></td>
                        <td>JWT authentication docs</td>
                    </tr>
                    <tr>
                        <td><a href="https://www.postman.com/">Postman</a></td>
                        <td>API testing tool</td>
                    </tr>
                </table>

                <h3>Common Commands Reference</h3>
                <pre># Start development server
python manage.py runserver

# Create migrations after model changes
python manage.py makemigrations

# Apply migrations
python manage.py migrate

# Create admin user
python manage.py createsuperuser

# Seed sample data
python manage.py seed_data

# Open Django shell
python manage.py shell

# Run tests (if you write them)
python manage.py test

# Collect static files
python manage.py collectstatic</pre>

                <div class="checklist">
                    <h3>Project Complete!</h3>
                    <ul>
                        <li>Full REST API with authentication</li>
                        <li>Multi-role user system (Admin, Company, Candidate)</li>
                        <li>Job posting and application system</li>
                        <li>Dummy AI analysis functionality</li>
                        <li>Dashboard analytics</li>
                        <li>File upload support</li>
                        <li>Admin panel</li>
                        <li>API documentation</li>
                    </ul>
                </div>

                <p style="text-align: center; font-size: 1.2em; margin-top: 30px;">
                    <strong>You're now ready to build full-stack applications with Django REST Framework!</strong>
                </p>
            </div>
        </div>

        <footer>
            <p>&copy; 2024 Mini-SBR Tower Project | Built with Django REST Framework</p>
            <p style="font-size: 0.9em; margin-top: 10px;">Follow each step carefully, type out the code yourself, and you'll master Django!</p>
        </footer>
    </div>

    <script>
        // Progress tracker functionality
        document.addEventListener('DOMContentLoaded', function() {
            const steps = document.querySelectorAll('.step');
            const progressFill = document.getElementById('progressFill');
            const totalSteps = steps.length;
            let completedSteps = 0;

            // Click-to-gray-out disabled for easier text selection/copying

            // Print button
            const printBtn = document.createElement('button');
            printBtn.textContent = 'ðŸ–¨ï¸ Print Roadmap';
            printBtn.style.cssText = 'position: fixed; bottom: 20px; right: 20px; padding: 15px 25px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 25px; cursor: pointer; font-size: 1em; box-shadow: 0 5px 15px rgba(0,0,0,0.3); z-index: 1000;';
            printBtn.onclick = () => window.print();
            document.body.appendChild(printBtn);
        });
    </script>
</body>
</html>